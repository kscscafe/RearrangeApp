{"ast":null,"code":"var _jsxFileName = \"/Users/ksugizaki/Library/CloudStorage/OneDrive-\\u500B\\u4EBA\\u7528/10_MacBookPro2018/\\u30E1\\u30E2\\u30FB\\u4F5C\\u696D\\u30ED\\u30AF\\u3099/RearrengeWebAPP/src/components/RearrangeSentence.js\";\nimport React, { useState } from 'react';\nimport pinyin from 'pinyin';\nconst RearrangeSentence = ({\n  group\n}) => {\n  const [selectedWords, setSelectedWords] = useState([]);\n  const [isConfirmed, setIsConfirmed] = useState(false);\n  const [resultSymbol, setResultSymbol] = useState(null);\n  const [currentProblemIndex, setCurrentProblemIndex] = useState(0);\n  const [shuffledWords, setShuffledWords] = useState([]);\n  const currentProblem = group.problems[currentProblemIndex];\n\n  // シャッフルされた単語を取得する関数\n  const getRandomizedWords = () => {\n    if (shuffledWords.length === 0) {\n      const allWords = [...currentProblem.correctOrder];\n      const shuffled = allWords.sort(() => Math.random() - 0.5);\n      setShuffledWords(shuffled);\n    }\n    return shuffledWords.length > 0 ? shuffledWords : currentProblem.correctOrder;\n  };\n  const toggleWordSelection = word => {\n    setSelectedWords(prev => {\n      if (prev.includes(word)) {\n        return prev.filter(w => w !== word);\n      } else {\n        return [...prev, word];\n      }\n    });\n    const utterance = new SpeechSynthesisUtterance(word);\n    utterance.lang = 'zh-CN';\n    window.speechSynthesis.speak(utterance);\n  };\n  const checkAnswer = () => {\n    if (selectedWords.join(',') === currentProblem.correctOrder.join(',')) {\n      setResultSymbol('⚪︎');\n    } else {\n      setResultSymbol('×');\n    }\n    setIsConfirmed(true);\n  };\n  const nextProblem = () => {\n    if (currentProblemIndex < group.problems.length - 1) {\n      setCurrentProblemIndex(prev => prev + 1);\n      setSelectedWords([]);\n      setIsConfirmed(false);\n      setResultSymbol(null);\n      setShuffledWords([]);\n    } else {\n      alert(\"全ての問題が終了しました！\");\n    }\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      padding: '10px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 13\n    }\n  }, \"\\u5358\\u8A9E\\u3092\\u30BF\\u30C3\\u30D7\\u3057\\u3066\\u6B63\\u3057\\u3044\\u9806\\u306B\\u4E26\\u3079\\u66FF\\u3048\\u3066\\u304F\\u3060\\u3055\\u3044\"), /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 13\n    }\n  }, currentProblem.translation), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      backgroundColor: 'white',\n      padding: '15px',\n      borderRadius: '5px',\n      border: '2px solid #f0f0f0',\n      minHeight: '60px',\n      display: 'flex',\n      alignItems: 'center',\n      marginBottom: '10px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 13\n    }\n  }, selectedWords.join(' '), isConfirmed && /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    style: {\n      color: 'red',\n      fontSize: '20px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 25\n    }\n  }, resultSymbol), selectedWords.join(' ') !== currentProblem.correctOrder.join(' ') ? /*#__PURE__*/React.createElement(\"p\", {\n    style: {\n      color: 'red'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 29\n    }\n  }, currentProblem.correctOrder.join(' ')) : null)), getRandomizedWords().map((word, index) => /*#__PURE__*/React.createElement(\"button\", {\n    key: index,\n    onClick: () => toggleWordSelection(word),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 17\n    }\n  }, word, \" \", /*#__PURE__*/React.createElement(\"span\", {\n    style: {\n      color: 'gray'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 28\n    }\n  }, pinyin(word, {\n    style: pinyin.STYLE_TONE\n  })))), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: checkAnswer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 13\n    }\n  }, isConfirmed ? \"次へ\" : \"確定\"));\n};\nexport default RearrangeSentence;","map":{"version":3,"names":["React","useState","pinyin","RearrangeSentence","group","selectedWords","setSelectedWords","isConfirmed","setIsConfirmed","resultSymbol","setResultSymbol","currentProblemIndex","setCurrentProblemIndex","shuffledWords","setShuffledWords","currentProblem","problems","getRandomizedWords","length","allWords","correctOrder","shuffled","sort","Math","random","toggleWordSelection","word","prev","includes","filter","w","utterance","SpeechSynthesisUtterance","lang","window","speechSynthesis","speak","checkAnswer","join","nextProblem","alert","createElement","style","padding","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","translation","backgroundColor","borderRadius","border","minHeight","display","alignItems","marginBottom","color","fontSize","map","index","key","onClick","STYLE_TONE"],"sources":["/Users/ksugizaki/Library/CloudStorage/OneDrive-個人用/10_MacBookPro2018/メモ・作業ログ/RearrengeWebAPP/src/components/RearrangeSentence.js"],"sourcesContent":["import React, { useState } from 'react';\nimport pinyin from 'pinyin';\n\nconst RearrangeSentence = ({ group }) => {\n    const [selectedWords, setSelectedWords] = useState([]);\n    const [isConfirmed, setIsConfirmed] = useState(false);\n    const [resultSymbol, setResultSymbol] = useState(null);\n    const [currentProblemIndex, setCurrentProblemIndex] = useState(0);\n    const [shuffledWords, setShuffledWords] = useState([]);\n\n    const currentProblem = group.problems[currentProblemIndex];\n\n    // シャッフルされた単語を取得する関数\n    const getRandomizedWords = () => {\n        if (shuffledWords.length === 0) {\n            const allWords = [...currentProblem.correctOrder];\n            const shuffled = allWords.sort(() => Math.random() - 0.5);\n            setShuffledWords(shuffled);\n        }\n        return shuffledWords.length > 0 ? shuffledWords : currentProblem.correctOrder;\n    };\n\n    const toggleWordSelection = (word) => {\n        setSelectedWords(prev => {\n            if (prev.includes(word)) {\n                return prev.filter(w => w !== word);\n            } else {\n                return [...prev, word];\n            }\n        });\n        const utterance = new SpeechSynthesisUtterance(word);\n        utterance.lang = 'zh-CN';\n        window.speechSynthesis.speak(utterance);\n    };\n\n    const checkAnswer = () => {\n        if (selectedWords.join(',') === currentProblem.correctOrder.join(',')) {\n            setResultSymbol('⚪︎');\n        } else {\n            setResultSymbol('×');\n        }\n        setIsConfirmed(true);\n    };\n\n    const nextProblem = () => {\n        if (currentProblemIndex < group.problems.length - 1) {\n            setCurrentProblemIndex(prev => prev + 1);\n            setSelectedWords([]);\n            setIsConfirmed(false);\n            setResultSymbol(null);\n            setShuffledWords([]);\n        } else {\n            alert(\"全ての問題が終了しました！\");\n        }\n    };\n\n    return (\n        <div style={{ padding: '10px' }}>\n            <h2>単語をタップして正しい順に並べ替えてください</h2>\n            <h3>{currentProblem.translation}</h3>\n            <div style={{\n                backgroundColor: 'white',\n                padding: '15px',\n                borderRadius: '5px',\n                border: '2px solid #f0f0f0',\n                minHeight: '60px',\n                display: 'flex',\n                alignItems: 'center',\n                marginBottom: '10px'\n            }}>\n                {selectedWords.join(' ')}\n                {isConfirmed && (\n                    <div>\n                        <span style={{ color: 'red', fontSize: '20px' }}>{resultSymbol}</span>\n                        {selectedWords.join(' ') !== currentProblem.correctOrder.join(' ') ? (\n                            <p style={{ color: 'red' }}>{currentProblem.correctOrder.join(' ')}</p>\n                        ) : null}\n                    </div>\n                )}\n            </div>\n            {getRandomizedWords().map((word, index) => (\n                <button key={index} onClick={() => toggleWordSelection(word)}>\n                    {word} <span style={{ color: 'gray' }}>{pinyin(word, { style: pinyin.STYLE_TONE })}</span>\n                </button>\n            ))}\n            <button onClick={checkAnswer}>{isConfirmed ? \"次へ\" : \"確定\"}</button>\n        </div>\n    );\n};\n\nexport default RearrangeSentence;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}